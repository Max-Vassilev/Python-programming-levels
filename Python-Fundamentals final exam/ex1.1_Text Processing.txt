message = input()

def enigma(message):
    while True:
        command = input()
        if command == 'Decode':
            break
        command = command.split('|')
        command_type = command[0]
        if command_type == 'Move':
            number_of_letters = int(command[1])
            new_part = message[0: number_of_letters]
            message = message[number_of_letters:]
            message += new_part

        elif command_type == 'Insert':
            index = int(command[1])
            value = command[2]
            first_part = message[:index] + value
            second_part = message[index:]
            message = first_part + second_part

        elif command_type == 'ChangeAll':
            substring = command[1]
            replacement = command[2]
            message = message.replace(substring, replacement)
    return f"The decrypted message is: {message}"


print(enigma(message))
